$(document).ready(function(){function t(t){for(var e="",a=0;a<t.length;a++)e+='<li id="'+t[a]._id+'"class="list-group-item"><span class="theText">'+t[a].text+'</span><a href="#" class="delete btn btn-danger btn-xs pull-right"><i class="fa fa-remove"></i></a><a href="#" class="edit btn btn-info btn-xs pull-right"><i class="fa fa-edit"></i></a></li>';$("#todoList").html(e)}function e(t){var e=t;$.ajax({url:"/api/todos/"+t,type:"DELETE",success:function(){$("#"+e).remove(),$.bootstrapGrowl("Item successfully removed.",{type:"success",align:"center",width:"auto",allow_dismiss:!0})},error:function(t){$.bootstrapGrowl(t.responseText,{type:"danger",align:"center",width:"auto",allow_dismiss:!0})}})}$.ajax({url:"/api/todos",type:"GET",success:function(e){t(e)},error:function(t){$.bootstrapGrowl(t.responseText,{type:"danger",align:"center",width:"auto",allow_dismiss:!1})}}),$("#form").submit(function(t){return t.preventDefault,$.ajax({url:"/api/todos",type:"POST",data:{todo:$("input").val().trim()},success:function(t){$("#todoList").append('<li id="'+t._id+'"class="list-group-item"><span class="theText">'+t.text+'</span> <a href="#" class="delete btn btn-danger btn-xs pull-right"><i class="fa fa-remove"></i></a><a href="#" class="edit btn btn-info btn-xs pull-right"><i class="fa fa-edit"></i></a> </li>'),$("input").val("")},error:function(t){$.bootstrapGrowl(t.responseText,{type:"danger",align:"center",width:"auto",allow_dismiss:!1})}}),!1}),$("ul").on("click",".delete",function(t){var a=$(t.currentTarget).parent().attr("id");e(a)}),$("ul").on("click",".edit",function(t){var e=$(t.currentTarget);"undefined"!=typeof e.parent().children("span").attr("contenteditable")?$.ajax({url:"/api/todos/"+e.parent().attr("id"),type:"PUT",data:{_id:e.parent().attr("id"),text:e.parent().children("span").text()},success:function(){e.parent().children("span").removeAttr("contenteditable"),e.removeClass("btn-success").addClass("btn-info"),e.children("i").removeClass("fa-save").addClass("fa-edit"),$.bootstrapGrowl("Successfully updated.",{type:"success",align:"center",width:"auto",allow_dismiss:!1})},error:function(t){$.bootstrapGrowl(t.responseText,{type:"danger",align:"center",width:"auto",allow_dismiss:!1})}}):(e.parent().children("span").attr("contenteditable",!0),e.removeClass("btn-info").addClass("btn-success"),e.children("i").removeClass("fa-edit").addClass("fa-save"))})});