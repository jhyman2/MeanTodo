"use strict";$(document).ready(function(){var e=Backbone.Model.extend({idAttribute:"_id"}),t=Backbone.Collection.extend({url:"/api/todos",model:e}),n=new t;n.fetch({error:function(e){$.bootstrapGrowl(e.responseText,{type:"danger",align:"center",width:"auto",allow_dismiss:!1})}}),n.on("add",function(e){var t="";t+='<li id="'+e.get("_id")+'"class="collection-item"><span class="theText">'+e.get("text")+'</span><a href="#" class="delete btn btn-xs pull-right red"><i class="fa fa-remove"></i></a><a href="#" class="edit btn btn-info btn-xs pull-right"><i class="fa fa-edit"></i></a></li>',$("#todoList").prepend(t),$("input").val(""),$(".collapsible").collapsible({accordion:!1})}),n.on("remove",function(e){return $("#"+e.get("_id")).remove()}),n.on("change",function(e){var t=$("#"+e.get("_id"));t.children("span").removeAttr("contenteditable"),t.children(".edit").removeClass("btn-success").addClass("btn-info"),t.children(".edit").children("i").removeClass("fa-save").addClass("fa-edit")});var a=function(e){var t=n.findWhere({_id:e});t.destroy()},i=function(e,t){var a=n.findWhere({_id:e});a.set("text",t),a.save()};$("#form").submit(function(e){e.preventDefault(),n.create({text:$("input").val().trim()},{wait:!0,error:function(e){$.bootstrapGrowl("Failed to add model.",{type:"danger",align:"center",width:"auto",allow_dismiss:!1})}})}),$("ul").on("click",".delete",function(e){var t=$(e.currentTarget).parent().attr("id");a(t)}),$("ul").on("click",".edit",function(e){var t=$(e.currentTarget);"undefined"!=typeof t.parent().children("span").attr("contenteditable")?i(t.parent().attr("id"),t.parent().children("span").text()):(t.parent().children("span").attr("contenteditable",!0),t.removeClass("btn-info").addClass("btn-success"),t.children("i").removeClass("fa-edit").addClass("fa-save"))})});